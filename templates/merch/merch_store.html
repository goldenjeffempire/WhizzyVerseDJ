{% extends 'base.html' %}

{% block title %}Merch Store - WhizzyVerse{% endblock %}

{% block content %}
<section class="bg-gradient-to-r from-electric-purple/20 to-neon-cyan/20 py-20">
    <div class="max-w-7xl mx-auto px-4">
        <h1 class="font-heading text-5xl md:text-6xl font-bold text-center glow-text mb-4">Merch Store</h1>
        <p class="text-center text-gray-400 text-xl">Rep the WhizzyVerse</p>
    </div>
</section>

<section class="max-w-7xl mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for item in merch_items %}
        <div class="bg-gray-900 rounded-lg overflow-hidden hover-glow transition" x-data="{ showDetails: false }">
            <div class="relative">
                <img src="{{ item.image_url }}" alt="{{ item.name }}" class="w-full h-80 object-cover">
                {% if item.featured %}
                <span class="absolute top-4 right-4 gradient-bg px-3 py-1 rounded-full text-sm font-bold">
                    Featured
                </span>
                {% endif %}
                {% if not item.in_stock %}
                <span class="absolute top-4 left-4 bg-red-600 px-3 py-1 rounded-full text-sm font-bold">
                    Sold Out
                </span>
                {% endif %}
            </div>
            <div class="p-6">
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-heading text-xl font-bold">{{ item.name }}</h3>
                    <span class="text-gray-500 text-sm">{{ item.category|title }}</span>
                </div>
                <p class="text-neon-cyan text-3xl font-bold mb-3">${{ item.price }}</p>
                <p class="text-gray-400 text-sm mb-4">{{ item.description|truncatewords:20 }}</p>
                
                {% if item.in_stock %}
                <button @click="showDetails = !showDetails" 
                        class="w-full gradient-bg py-3 rounded-lg font-bold hover-glow">
                    Add to Cart
                </button>
                <div x-show="showDetails" x-transition class="mt-4 p-4 bg-gray-800 rounded-lg">
                    <p class="text-green-400 text-sm">âœ“ Added to cart! (Demo Mode)</p>
                    <p class="text-gray-400 text-xs mt-2">{{ item.stock }} items in stock</p>
                </div>
                {% else %}
                <button class="w-full bg-gray-700 py-3 rounded-lg font-bold cursor-not-allowed">
                    Out of Stock
                </button>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p class="text-gray-400 col-span-3 text-center py-12">No merch available yet. Check back soon!</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
